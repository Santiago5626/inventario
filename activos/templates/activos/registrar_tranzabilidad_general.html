{% extends 'base.html' %}
{% block title %}Registrar Tranzabilidad{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        <h1>Registrar Tranzabilidad</h1>
        <form method="post">
            {% csrf_token %}
            <div class="form-group mb-3">
                <label for="id_activo" class="form-label">Activo</label>
                {{ form.activo }}
                <!-- Django form rendering for ModelChoiceField is easiest if we use {{ form.activo }}.
                     Creating a manual select would require passing 'activos' context which we haven't done explicitly in views yet (though ModelForm handles it). 
                     Since we used CreateView with model=Tranzabilidad and fields including 'activo', form.activo should render. 
            </div>

            <div class="form-group mb-3">
                <label for="tipo" class="form-label">Tipo de Tranzabilidad</label>
                <select name="tipo" class="form-control" required>
                    <option value="ingreso">Ingreso</option>
                    <option value="salida">Salida</option>
                    <option value="transferencia">Transferencia</option>
                    <option value="cambio_estado">Cambio de Estado</option>
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="zona_origen" class="form-label">Zona Origen</label>
                <select name="zona_origen" class="form-control">
                    <option value="">Ninguna</option>
                    {% for zona in zonas %}
                    <option value="{{ zona }}">{{ zona }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="zona_destino" class="form-label">Zona Destino</label>
                <select name="zona_destino" class="form-control">
                    <option value="">Ninguna</option>
                    {% for zona in zonas %}
                    <option value="{{ zona }}">{{ zona }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="estado_nuevo" class="form-label">Estado Nuevo</label>
                <input type="text" name="estado_nuevo" class="form-control" placeholder="Ej. reparación, asignado">
            </div>
            <div class="form-group mb-3">
                <label for="descripcion" class="form-label">Descripción</label>
                <textarea name="descripcion" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Registrar Tranzabilidad</button>
            <a href="{% url 'activos:tranzabilidad_list' %}" class="btn btn-secondary">Cancelar</a>
        </form>
    </div>
</div>
{% endblock %}